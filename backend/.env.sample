# 数据库
# DATABASE_URL 应该指向您的 PostgreSQL 实例
DATABASE_URL="postgresql://user:password@localhost:5432/hydroline?schema=public&connection_limit=20&pool_timeout=30"

# BetterAuth 配置
BETTER_AUTH_SECRET="replace-with-a-long-random-secret"
BETTER_AUTH_URL="http://localhost:3000"

# 自定义 JWT 守卫的访问令牌设置 (默认: 密钥回退到 BETTER_AUTH_SECRET, 过期时间 15 分钟)
ACCESS_TOKEN_SECRET="replace-with-access-token-secret"
ACCESS_TOKEN_EXPIRES_IN="900"      # 秒

# 用于生成绝对资产链接的公共基础 URL
APP_PUBLIC_BASE_URL="http://localhost:3000"

# 附件存储驱动：local 或 s3（腾讯云 COS 属于 S3 兼容）
ATTACHMENTS_STORAGE_DRIVER="local"

# 附件对外分发模式：
# - direct: 返回可直连的 public URL（优先用 ATTACHMENTS_PUBLIC_BASE_URL，其次 S3_PUBLIC_BASE_URL）
# - proxy: 统一返回 /attachments/public/:id 由后端转发（更易控权/更一致，但流量回源到后端）
ATTACHMENTS_DELIVERY_MODE="direct"

# 当 ATTACHMENTS_DELIVERY_MODE=direct 时：
# 自定义源站/回源域名（CDN 域名）前缀，最终附件 publicUrl 将形如：
#   ${ATTACHMENTS_PUBLIC_BASE_URL}/${storageKey}
# 例如：https://assets.example.com/
ATTACHMENTS_PUBLIC_BASE_URL=""

# 本地存储目录 (相对于 backend/ 的绝对或相对路径)。在开发环境中默认为
# ../uploads, 解析为 <project-root>/uploads。
ATTACHMENTS_DIR="../uploads"

# S3 兼容对象存储配置（当 ATTACHMENTS_STORAGE_DRIVER=s3 时必填）
# 腾讯云 COS 示例：
# S3_ENDPOINT="https://cos.ap-beijing.myqcloud.com"
# S3_REGION="ap-beijing"
# S3_BUCKET="your-bucket-1250000000"
S3_ENDPOINT=""
S3_REGION=""
S3_BUCKET=""
S3_ACCESS_KEY_ID=""
S3_SECRET_ACCESS_KEY=""
S3_FORCE_PATH_STYLE="false"

# 可选：对象 key 的统一前缀（不带首尾 /），例如："uploads" 或 "prod/uploads"
S3_KEY_PREFIX=""

# 可选：当未设置 ATTACHMENTS_PUBLIC_BASE_URL 时，S3 存储可用此值拼直链
# 例如：https://your-bucket-1250000000.cos.ap-beijing.myqcloud.com/
S3_PUBLIC_BASE_URL=""

# 用于发送电子邮件的 SMTP 配置 (验证/密码重置所需)
SMTP_HOST="smtp.example.com"
SMTP_PORT="465"              # 465 for SMTPS, 587 for STARTTLS
SMTP_USER="no-reply@example.com"
SMTP_PASS="your-smtp-password"
SMTP_SECURE="true"           # SMTPS/465 为 true, 否则为 false
MAIL_FROM="Hydroline <no-reply@example.com>"

# 可选: OAuth 提供商
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
GOOGLE_OAUTH_REDIRECT_URI="http://localhost:3000/api/oauth/providers/google/callback"

MICROSOFT_OAUTH_TENANT_ID="common"
MICROSOFT_OAUTH_CLIENT_ID=""
MICROSOFT_OAUTH_CLIENT_SECRET=""
MICROSOFT_OAUTH_REDIRECT_URI="http://localhost:3000/api/oauth/providers/microsoft/callback"

# 可选：QQ OAuth 2.0
QQ_OAUTH_CLIENT_ID=""
QQ_OAUTH_CLIENT_SECRET=""
QQ_OAUTH_REDIRECT_URI="http://localhost:3000/api/oauth/providers/qq/callback"

# 可选: 默认管理员引导密码 (仅在首次运行时使用)
DEFAULT_ADMIN_PASSWORD="admin123456"

# 可选: OAuth 代理 (用于提供商级别的代理转发)
# 配置后且提供商设置 providerProxyEnabled=true 时,
# 后端将向此代理 POST OAuth HTTP 请求, 而不是直接调用 Google/Microsoft 端点。
OAUTH_PROXY_URL="https://your-oauth-proxy.example.com/"
OAUTH_PROXY_KEY="replace-with-strong-shared-secret"

# Redis 配置
# 设置 REDIS_ENABLED=false 以禁用 Redis 并使用内存缓存 (仅限开发环境)
REDIS_ENABLED="true"
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""            # 如果没有设置密码，请留空
REDIS_DB="0"                 # 数据库编号 (0-15)
REDIS_TTL="3600000"          # 默认 TTL (毫秒) (1 小时)
